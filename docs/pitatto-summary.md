# AIとの協業における重要な教訓

## 目次
- [はじめに](#はじめに)
- [AIとの協業における重要な教訓](#aiとの協業における重要な教訓-1)
- [コミット前の確認の重要性](#コミット前の確認の重要性)
- [わかりやすい例え](#わかりやすい例え)
- [AIを活用したプロジェクト移行の成功事例](#aiを活用したプロジェクト移行の成功事例)
- [AIを活用したプルリクエスト作成](#aiを活用したプルリクエスト作成)
- [CLIを活用したプルリクエスト作成](#cliを活用したプルリクエスト作成)
- [まとめ](#まとめ)

## はじめに

ソフトウェア開発において、AIを活用することで効率的に作業を進めることができます。しかし、AIと協業する際には注意すべき点もあります。この文書では、AIとの協業から得られた重要な教訓を共有します。

## AIとの協業における重要な教訓

AIは強力なツールですが、人間の指示に基づいて動作します。そのため、明確な指示と適切な確認プロセスが不可欠です。

## コミット前の確認の重要性

**コミット前の確認の重要性**：AIにコミット（変更内容の保存）を依頼する場合、必ず「変更したファイルを確認してからコミットして」と明確に指示することが大切です。

この一言がないと、重要なファイルの変更が保存されず、システム全体が正しく動作しなくなる可能性があります。

## わかりやすい例え

これは料理に例えると、シェフ（AI）に「この料理を作って」と頼んだ後、「盛り付ける前に、すべての材料が入っているか確認してね」と伝えるようなものです。この一言がないと、大事な材料（ファイルの変更）が抜け落ちてしまうことがあります。

特にプログラミングでは、複数のファイルが連携して動作するため、一部のファイルの変更が保存されないと、全体が正しく動作しなくなることがあります。これは、レシピの一部だけを変更して、他の部分を変更し忘れるようなものです。

## AIを活用したプロジェクト移行の成功事例

ソフトウェア開発において、既存のプロジェクトから新しいバージョンへの移行は、多くの場合、複雑で時間のかかるプロセスです。特に、データベース構造やディレクトリ構造が大きく変わる場合、その難易度は一層高まります。私たちのチームは、ピタットAIのバージョン2からバージョン3への移行において、AIを効果的に活用することで、このプロセスを大幅に効率化することに成功しました。

### 課題：異なるアーキテクチャ間の橋渡し

ピタットAIのバージョン2とバージョン3では、検索機能の実装方法が大きく異なっていました。特にX検索機能については、データベース構造が完全に異なり、ディレクトリ構造も再設計されていたため、単純なコードの移植では対応できない状況でした。

### アプローチ：AIを活用した段階的移行

私たちは、この課題に対して、AIを「翻訳者」として活用する独自のアプローチを採用しました。具体的には以下のステップで進めました：

1. **コードベースの分析と要約**：
   まず、バージョン2の検索機能に関連するすべてのディレクトリとファイルをAIに分析させました。AIは複雑なコードベースを理解し、その機能や相互関係を包括的なマークダウン文書にまとめました。

2. **要件定義書の作成**：
   AIが生成した要約を人間のエンジニアが精査し、必要に応じて修正を加えながら、バージョン3への移行に必要な要件定義書を作成しました。この過程では、AIが提供した情報の約90%を活用することができ、作業時間を大幅に短縮できました。

3. **新アーキテクチャへの適応**：
   作成した要件定義書をバージョン3のプロジェクトに適用する際、AIに対して「現在のデータベース構造とディレクトリ構造に合わせて実装してください」と指示しました。AIはこの指示に基づいて、新しいアーキテクチャに適合するコード設計を提案しました。

4. **コード移行の実施**：
   最終的に、バージョン2のコードをAIに提示しながら、バージョン3のルールや構造に準拠した形で実装を進めました。AIは両方のバージョンの違いを理解し、適切な変換を提案してくれました。

### 成果：効率的な移行と知見の獲得

このアプローチにより、従来であれば数週間を要するプロジェクト移行を、より短期間で、かつ高品質に完了することができました。特筆すべき点として、以下の成果が挙げられます：

- **知識の橋渡し**：AIが古いコードベースの理解と新しいアーキテクチャへの適応を支援することで、知識の移転がスムーズに行われました。
- **一貫性の確保**：AIの支援により、新しい実装が既存のコーディング規約やアーキテクチャパターンに一貫して従うことを確保できました。
- **学習曲線の短縮**：エンジニアがバージョン3の新しいアーキテクチャを完全に理解する前でも、AIのガイダンスにより効果的に作業を進めることができました。

この経験から、AIは単なるコード生成ツールではなく、異なるシステム間の「翻訳者」として非常に価値があることを学びました。特に、大規模なリファクタリングやシステム移行において、AIの言語理解能力と抽象化能力は、人間のエンジニアの創造性や判断力と組み合わせることで、最大の効果を発揮します。

## AIを活用したプルリクエスト作成

### プルリクエストとは

プルリクエスト（Pull Request、略してPR）は、コードの変更を他のメンバーに共有し、レビューを受けてからメインのコードベースに統合するための仕組みです。開発初心者の方にもわかりやすく説明すると、以下のようなものです：

**料理に例えると**：あなたが新しいレシピ（コードの変更）を考案し、それをレストランのメニュー（メインのコードベース）に加えたいとします。しかし、いきなりメニューに載せるのではなく、まずはシェフ（レビュアー）に試食してもらい、「これは美味しい！メニューに加えましょう」と承認をもらってから正式に採用される、というプロセスです。

プルリクエストの主な目的は：
1. **コード品質の向上**：複数の目でコードをチェックすることで、バグや問題点を早期に発見できます
2. **知識の共有**：チームメンバーがお互いのコードを見ることで、知識やスキルが共有されます
3. **変更履歴の管理**：どのような変更がいつ、誰によって行われたかを追跡できます

### AIを活用したプルリクエスト作成の利点

プルリクエストを作成する際、特に変更内容が多い場合は、その変更点を明確に説明することが重要です。ここでAIを活用することで、以下のような利点があります：

1. **変更内容の自動要約**：AIに変更したファイルを見せることで、変更点を簡潔にまとめたプルリクエストの説明文を生成できます
2. **適切なタイトルの提案**：変更内容に基づいて、わかりやすいプルリクエストのタイトルを提案してもらえます
3. **レビュアーへの注目ポイントの明示**：特に注意してレビューしてほしい部分を強調した説明を生成できます

### 実践例：AIを活用したプルリクエスト作成手順

以下は、AIを活用してプルリクエストを作成する具体的な手順です：

1. **変更内容の確認**：
   ```bash
   git diff
   ```
   このコマンドで変更したファイルと内容を確認します。

2. **AIへの情報提供**：
   変更したファイルの内容や変更点をAIに伝えます。例えば：
   「CSSファイルのデザインを改善したので変更内容をプルリクエスト用にまとめてください。」

3. **AIからの提案を活用**：
   AIが生成したタイトルと説明文を確認し、必要に応じて調整します。例えば：

   **タイトル例**：
   ```
   スライドのデザイン改善とコンテンツ追加
   ```

   **説明文例**：
   ```markdown
   ## 変更内容
   - custom.cssのデザイン改善
     - グラデーション背景の追加
     - フォントスタイルの調整
     - テーブルやブロッククォートなどの要素のスタイル改善
   - スライド内容の拡充
     - AIツールの普及状況に関するスライド追加
     - AIコードレビューツールの比較スライド追加
   
   ## 確認事項
   - スライドのデザインが改善され、より見やすくなっていることを確認
   - 追加されたコンテンツが正確で最新の情報を反映していることを確認
   ```

4. **プルリクエストの作成**：
   GitHubの画面で「Compare & pull request」ボタンをクリックし、AIが生成したタイトルと説明文を貼り付けて送信します。

### AIを活用する際のポイント

1. **変更内容を正確に伝える**：AIに変更内容を伝える際は、できるだけ具体的に説明しましょう
2. **生成された内容を必ず確認**：AIが生成した内容は必ず自分で確認し、必要に応じて修正しましょう
3. **チームの規約に合わせる**：チームごとにプルリクエストの形式やルールがある場合は、それに合わせて調整しましょう

### 開発者の声

「プルリクエストの説明を書くのが苦手だったのですが、AIに手伝ってもらうことで、より明確で詳細な説明が書けるようになりました。レビュアーからも『変更点がわかりやすい』と好評です。」

「複雑な変更を行った後、何をどう説明すればいいか悩んでいましたが、AIに変更内容を伝えるだけで、構造化された説明文を提案してくれるので助かっています。」

## CLIを活用したプルリクエスト作成

### CLIとは何か

CLI（Command Line Interface）とは、グラフィカルなボタンやメニューではなく、テキストコマンドを入力して操作するインターフェースのことです。初心者の方にもわかりやすく説明すると：

**日常生活に例えると**：グラフィカルなインターフェース（GUI）は、レストランでメニュー表から料理を指さして注文するようなものです。一方、CLIは電話で「本日のスペシャルを一つください」と言葉で伝えて注文するようなものです。見た目はシンプルですが、慣れると非常に効率的です。

### CLIを使用したプルリクエスト作成の利点

プルリクエストをCLIから作成することには、以下のような利点があります：

1. **作業効率の向上**：ブラウザを開いてGitHubなどのWebサイトに移動する必要がなく、ターミナル上で完結できます
2. **自動化の容易さ**：スクリプトやエイリアスを作成して、繰り返し行う操作を自動化できます
3. **一貫性の確保**：テンプレートを使用することで、常に同じ形式のプルリクエストを作成できます
4. **コンテキストの維持**：コーディング作業中のターミナルから直接プルリクエストを作成できるため、作業の流れが途切れません

### 実践例：CLIを使用したプルリクエスト作成手順

以下は、GitHubのCLIツール「gh」を使用してプルリクエストを作成する手順です：

1. **GitHubのCLIツールのインストール**：
   ```bash
   # macOSの場合
   brew install gh
   
   # Windowsの場合
   winget install --id GitHub.cli
   
   # Linuxの場合
   sudo apt install gh  # Ubuntuの例
   ```

2. **認証の設定**：
   ```bash
   gh auth login
   ```
   画面の指示に従って認証を完了します。

3. **変更をコミットしてプッシュ**：
   ```bash
   git add .
   git commit -m "機能の追加：ユーザー登録フォームの改善"
   git push -u origin feature-branch
   ```

4. **プルリクエストの作成**：
   ```bash
   gh pr create --title "ユーザー登録フォームの改善" --body "ユーザー登録フォームにバリデーション機能を追加し、UXを向上させました。"
   ```
   
   または、対話形式で作成することもできます：
   ```bash
   gh pr create
   ```
   このコマンドを実行すると、タイトルや説明文を対話形式で入力できます。

5. **AIの支援を受ける場合**：
   ```bash
   # 変更内容を確認
   git diff main...feature-branch > changes.diff
   
   # AIにdiffファイルを提供して説明文を生成してもらう
   # （AIツールによって方法は異なります）
   
   # 生成された説明文を使ってプルリクエストを作成
   gh pr create --title "生成されたタイトル" --body "生成された説明文"
   ```

### CLIとAIを組み合わせた効率的なワークフロー

CLIとAIを組み合わせることで、さらに効率的なプルリクエスト作成が可能になります：

1. **変更内容の自動分析**：
   ```bash
   # 変更内容をAIに分析してもらうスクリプト例
   git diff main...feature-branch | ai-assistant "プルリクエストの説明文を生成して"
   ```

2. **テンプレートの活用**：
   ```bash
   # テンプレートファイルを作成
   cat > pr-template.md << EOF
   ## 変更内容
   
   ## 変更理由
   
   ## テスト方法
   
   ## スクリーンショット
   EOF
   
   # テンプレートを使用してプルリクエストを作成
   gh pr create --title "機能追加" --body-file pr-template.md
   ```

3. **自動化スクリプトの作成**：
   ```bash
   # .bashrcや.zshrcに以下のような関数を追加
   create_pr() {
     git diff main...$(git branch --show-current) > changes.diff
     PR_DESCRIPTION=$(ai-assistant < changes.diff)
     gh pr create --title "$(git branch --show-current | sed 's/-/ /g')" --body "$PR_DESCRIPTION"
   }
   ```
   このようなスクリプトを作成しておけば、`create_pr`コマンドを実行するだけで、AIが生成した説明文を使ったプルリクエストを自動的に作成できます。

### 初心者向けのヒント

CLIが初めての方でも安心して使えるようにするためのヒントです：

1. **--helpオプションの活用**：コマンドの使い方がわからない場合は、`gh pr create --help`のように`--help`オプションを付けて実行すると、詳細な使い方が表示されます

2. **ドラフトプルリクエストの活用**：レビュー準備が整っていない場合は、`gh pr create --draft`オプションを使用してドラフト状態で作成できます

3. **プレビュー機能の活用**：`gh pr create --fill`コマンドを使うと、コミットメッセージからタイトルと説明文を自動生成できます

4. **エイリアスの設定**：よく使うコマンドは、`gh alias set prc 'pr create'`のようにエイリアスを設定しておくと便利です

### 開発者の声

「以前はプルリクエストを作成するたびにブラウザを開いて操作していましたが、CLIを使うようになってから作業効率が格段に上がりました。特にAIと組み合わせると、説明文の作成も自動化できて時間の節約になっています。」

「コマンドラインが苦手でしたが、基本的なコマンドさえ覚えれば意外と簡単に使えることがわかりました。今では毎日のワークフローに欠かせないツールになっています。」

## まとめ

AIとの協業においては、明確な指示と確認のプロセスが、成功への鍵となります。特にコミット前の確認は、思わぬエラーや問題を防ぐために欠かせないステップです。

また、プルリクエスト作成においてもAIを活用することで、より効率的かつ効果的なコード共有とレビューのプロセスを実現できます。AIは私たちの作業を支援するパートナーとして、日々の開発業務をより円滑に進めるための強力なツールとなっています。

これからも、AIとの効果的な協業方法を模索し、より良いソフトウェア開発を目指していきましょう。
